{% extends "email_base.html" %}

{% block content %}
<tr>
  <td style="background-color: #ffffff">
    <table
      role="presentation"
      cellspacing="0"
      cellpadding="0"
      border="0"
      width="100%"
    >
      <tr>
        <td
          style="
            padding: 20px;
            font-family: sans-serif;
            font-size: 15px;
            line-height: 20px;
            color: #555555;
          "
        >
          <p style="margin: 0 0 10px">Dear Team,</p>
          <p style="margin: 0 0 10px">
            The latest course synchronization process for
            {{ vendor_name }}
            has completed. Below are the generated statistics:
          </p>

          <p style="margin: 0 0 10px"><strong>Courses:</strong></p>
          <ul style="margin: 0 0 10px; padding-left: 20px">
            <li>
              <span style="color: #008000"
                >Courses Created ({{ stats.courses_created|length }}):</span
              >
              {% if stats.courses_created %}
              <ul>
                {% for course in stats.courses_created %}
                <li>
                  {{ course.code }}
                  ({{ course.title }})
                </li>
                {% endfor %}
              </ul>
              {% else %}No courses created during this sync.{% endif %}
            </li>
            <li>
              <span style="color: #008000"
                >Existing Courses ({{ stats.existing_courses|length }}):</span
              >
              {% if stats.existing_courses %}
              <ul>
                {% for course in stats.existing_courses %}
                <li>
                  {{ course.code }}
                  ({{ course.title }})
                </li>
                {% endfor %}
              </ul>
              {% else %}No existing courses found.{% endif %}
            </li>
          </ul>

          <p style="margin: 0 0 10px"><strong>Course Runs:</strong></p>
          <ul style="margin: 0 0 10px; padding-left: 20px">
            <li>
              <span style="color: #008000"
                >Course Runs Created ({{ stats.course_runs_created|length }}):</span
              >
              {% if stats.course_runs_created %}
              <ul>
                {% for run in stats.course_runs_created %}
                <li>
                  {{ run.code }}
                  ({{ run.title }})
                </li>
                {% endfor %}
              </ul>
              {% else %}No course runs created during this sync.{% endif %}
            </li>
            <li>
              <span style="color: #008000"
                >Course Runs Updated ({{ stats.course_runs_updated|length }}):</span
              >
              {% if stats.course_runs_updated %}
              <ul>
                {% for run in stats.course_runs_updated %}
                <li>
                  {{ run.code }}
                  ({{ run.title }})
                </li>
                {% endfor %}
              </ul>
              {% else %}No course runs updated during this sync.{% endif %}
            </li>
            <li>
              <span style="color: #ff0000"
                >Course Runs Without Prices ({{ stats.course_runs_without_prices|length }}):</span
              >
              {% if stats.course_runs_without_prices %}
              <ul>
                {% for run in stats.course_runs_without_prices %}
                <li>
                  {{ run.code }}
                  ({{ run.title }})
                </li>
                {% endfor %}
              </ul>
              {% else %}No course runs without prices.{% endif %}
            </li>
            <li>
              <span style="color: #ff0000"
                >Course Runs Skipped (Bad Data) ({{ stats.course_runs_skipped|length }}):</span
              >
              {% if stats.course_runs_skipped %}
              <ul>
                {% for run in stats.course_runs_skipped %}
                <li>
                  {{ run.code }}
                  ({{ run.title }}) -
                  {{ run.msg }}
                </li>
                {% endfor %}
              </ul>
              {% else %}No course runs skipped.{% endif %}
            </li>
            <li>
              <span style="color: #ff0000"
                >Course Runs With Invalid Dates ({{ stats.course_runs_with_invalid_dates|length }}):</span
              >
              {% if stats.course_runs_with_invalid_dates %}
              <ul>
                {% for run in stats.course_runs_with_invalid_dates %}
                <li>
                  {{ run.code }}
                  ({{ run.title }})
                </li>
                {% endfor %}
              </ul>
              {% else %}No course runs with invalid dates.{% endif %}
            </li>
            <li>
              <span style="color: #ff0000"
                >Course Runs Deactivated ({{ stats.course_runs_deactivated|length }}):</span
              >
              {% if stats.course_runs_deactivated %}
              <ul>
                {% for run in stats.course_runs_deactivated %}
                <li>
                  {{ run.code }}
                  ({{ run.title }})
                </li>
                {% endfor %}
              </ul>
              {% else %}No course runs deactivated.{% endif %}
            </li>
          </ul>

          <p style="margin: 0 0 10px"><strong>Course Pages:</strong></p>
          <ul style="margin: 0 0 10px; padding-left: 20px">
            <li>
              <span style="color: #008000"
                >Course Pages Created ({{ stats.course_pages_created|length }}):</span
              >
              {% if stats.course_pages_created %}
              <ul>
                {% for page in stats.course_pages_created %}
                <li>
                  {{ page.code }}
                  ({{ page.title }})
                </li>
                {% endfor %}
              </ul>
              {% else %}No course pages created during this sync.{% endif %}
            </li>
            <li>
              <span style="color: #008000"
                >Course Pages Updated ({{ stats.course_pages_updated|length }}):</span
              >
              {% if stats.course_pages_updated %}
              <ul>
                {% for page in stats.course_pages_updated %}
                <li>
                  {{ page.code }}
                  ({{ page.title }})
                </li>
                {% endfor %}
              </ul>
              {% else %}No course pages updated during this sync.{% endif %}
            </li>
          </ul>

          <p style="margin: 0 0 10px"><strong>Products:</strong></p>
          <ul style="margin: 0 0 10px; padding-left: 20px">
            <li>
              <span style="color: #008000"
                >Products Created ({{ stats.products_created|length }}):</span
              >
              {% if stats.products_created %}
              <ul>
                {% for product in stats.products_created %}
                <li>
                  {{ product.code }}
                  ({{ product.title }})
                </li>
                {% endfor %}
              </ul>
              {% else %}No products created during this sync.{% endif %}
            </li>
            <li>
              <span style="color: #008000"
                >Products Versions Created ({{ stats.products_versions_created|length }}):</span
              >
              {% if stats.products_versions_created %}
              <ul>
                {% for product in stats.products_versions_created %}
                <li>
                  {{ product.code }}
                  ({{ product.title }})
                </li>
                {% endfor %}
              </ul>
              {% else %}No products versions created during this sync.{% endif %}
            </li>
          </ul>

          <p style="margin: 0 0 10px"><strong>Certificate Pages:</strong></p>
          <ul style="margin: 0 0 10px; padding-left: 20px">
            <li>
              <span style="color: #008000"
                >Certificates Pages Created ({{ stats.certificates_created|length }}):</span
              >
              {% if stats.certificates_created %}
              <ul>
                {% for cert in stats.certificates_created %}
                <li>{{ cert.code }}</li>
                {% endfor %}
              </ul>
              {% else %}No certificates pages created during this sync.{% endif %}
            </li>
            <li>
              <span style="color: #008000"
                >Certificates Pages Updated ({{ stats.certificates_updated|length }}):</span
              >
              {% if stats.certificates_updated %}
              <ul>
                {% for cert in stats.certificates_updated %}
                <li>{{ cert.code }}</li>
                {% endfor %}
              </ul>
              {% else %}No certificates pages updated during this sync.{% endif %}
            </li>
          </ul>

          <p style="margin: 0 0 10px">
            Please review the details and reach out if any discrepancies are
            found.
          </p>
          <p style="margin: 0 0 10px">Best regards,</p>
          <p style="margin: 0 0 10px">MIT xPRO Team</p>
        </td>
      </tr>
    </table>
  </td>
</tr>
{% endblock %}
